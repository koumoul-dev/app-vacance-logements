{
  "type": "object",
  "allOf": [
    {
      "title": "Source de données",
      "required": [ "datasets" ],
      "properties": {
        "datasets": {
          "$ref": "#/definitions/datasets"
        }
      }
    }, {
      "title": "Infobulles",
      "properties": {
        "descParc": {
          "title": "Parc total de logements (Insee 2018)",
          "type": "string",
          "x-display": "textarea"
        },
        "descInsee": {
          "title": "Logements Vacants (Insee 2018)",
          "type": "string",
          "x-display": "textarea"
        },
        "descLoval": {
          "title": "Logements Vacants (Lovac 2019)",
          "type": "string",
          "x-display": "textarea"
        },
        "descPC": {
          "title": "Permis de construire autorisés (Sitadel, 2018)",
          "type": "string",
          "x-display": "textarea"
        },
        "descGES": {
          "title": "Emissions de Gaz à Effet de Serre (estimations, eqCO2)",
          "type": "string",
          "x-display": "textarea"
        }
      }
    }
  ],
  "definitions": {
    "datasets": {
      "type": "array",
      "items": [
        {
          "title": "LOG 1 Communes",
          "type": "object",
          "x-fromUrl": "api/v1/datasets?status=finalized&field-type=integer,number&q={q}&select=id,title&owner={context.owner.type}:{context.owner.id}",
          "x-itemsProp": "results",
          "x-itemTitle": "title",
          "x-itemKey": "href",
          "properties": {
            "href": {
              "type": "string"
            },
            "title": {
              "type": "string"
            },
            "id": {
              "type": "string"
            }
          }
        },
        {
          "title": "LOG 1 EPCI",
          "type": "object",
          "x-fromUrl": "api/v1/datasets?status=finalized&field-type=integer,number&q={q}&select=id,title&owner={context.owner.type}:{context.owner.id}",
          "x-itemsProp": "results",
          "x-itemTitle": "title",
          "x-itemKey": "href",
          "properties": {
            "href": {
              "type": "string"
            },
            "title": {
              "type": "string"
            },
            "id": {
              "type": "string"
            }
          }
        },
        {
          "title": "LOG 1 Département",
          "type": "object",
          "x-fromUrl": "api/v1/datasets?status=finalized&field-type=integer,number&q={q}&select=id,title&owner={context.owner.type}:{context.owner.id}",
          "x-itemsProp": "results",
          "x-itemTitle": "title",
          "x-itemKey": "href",
          "properties": {
            "href": {
              "type": "string"
            },
            "title": {
              "type": "string"
            },
            "id": {
              "type": "string"
            }
          }
        },
        {
          "title": "LOG 1 Région",
          "type": "object",
          "x-fromUrl": "api/v1/datasets?status=finalized&field-type=integer,number&q={q}&select=id,title&owner={context.owner.type}:{context.owner.id}",
          "x-itemsProp": "results",
          "x-itemTitle": "title",
          "x-itemKey": "href",
          "properties": {
            "href": {
              "type": "string"
            },
            "title": {
              "type": "string"
            },
            "id": {
              "type": "string"
            }
          }
        },
        {
          "title": "Evolution Communes",
          "type": "object",
          "x-fromUrl": "api/v1/datasets?status=finalized&field-type=integer,number&q={q}&select=id,title&owner={context.owner.type}:{context.owner.id}",
          "x-itemsProp": "results",
          "x-itemTitle": "title",
          "x-itemKey": "href",
          "properties": {
            "href": {
              "type": "string"
            },
            "title": {
              "type": "string"
            },
            "id": {
              "type": "string"
            }
          }
        },
        {
          "title": "Evolution EPCI",
          "type": "object",
          "x-fromUrl": "api/v1/datasets?status=finalized&field-type=integer,number&q={q}&select=id,title&owner={context.owner.type}:{context.owner.id}",
          "x-itemsProp": "results",
          "x-itemTitle": "title",
          "x-itemKey": "href",
          "properties": {
            "href": {
              "type": "string"
            },
            "title": {
              "type": "string"
            },
            "id": {
              "type": "string"
            }
          }
        },
        {
          "title": "Evolution Département",
          "type": "object",
          "x-fromUrl": "api/v1/datasets?status=finalized&field-type=integer,number&q={q}&select=id,title&owner={context.owner.type}:{context.owner.id}",
          "x-itemsProp": "results",
          "x-itemTitle": "title",
          "x-itemKey": "href",
          "properties": {
            "href": {
              "type": "string"
            },
            "title": {
              "type": "string"
            },
            "id": {
              "type": "string"
            }
          }
        },
        {
          "title": "Evolution Région",
          "type": "object",
          "x-fromUrl": "api/v1/datasets?status=finalized&field-type=integer,number&q={q}&select=id,title&owner={context.owner.type}:{context.owner.id}",
          "x-itemsProp": "results",
          "x-itemTitle": "title",
          "x-itemKey": "href",
          "properties": {
            "href": {
              "type": "string"
            },
            "title": {
              "type": "string"
            },
            "id": {
              "type": "string"
            }
          }
        },
        {
          "title": "Lovac Commune",
          "type": "object",
          "x-fromUrl": "api/v1/datasets?status=finalized&field-type=integer,number&q={q}&select=id,title&owner={context.owner.type}:{context.owner.id}",
          "x-itemsProp": "results",
          "x-itemTitle": "title",
          "x-itemKey": "href",
          "properties": {
            "href": {
              "type": "string"
            },
            "title": {
              "type": "string"
            },
            "id": {
              "type": "string"
            }
          }
        },
        {
          "title": "Lovac EPCI",
          "type": "object",
          "x-fromUrl": "api/v1/datasets?status=finalized&field-type=integer,number&q={q}&select=id,title&owner={context.owner.type}:{context.owner.id}",
          "x-itemsProp": "results",
          "x-itemTitle": "title",
          "x-itemKey": "href",
          "properties": {
            "href": {
              "type": "string"
            },
            "title": {
              "type": "string"
            },
            "id": {
              "type": "string"
            }
          }
        },
        {
          "title": "Lovac Département",
          "type": "object",
          "x-fromUrl": "api/v1/datasets?status=finalized&field-type=integer,number&q={q}&select=id,title&owner={context.owner.type}:{context.owner.id}",
          "x-itemsProp": "results",
          "x-itemTitle": "title",
          "x-itemKey": "href",
          "properties": {
            "href": {
              "type": "string"
            },
            "title": {
              "type": "string"
            },
            "id": {
              "type": "string"
            }
          }
        },
        {
          "title": "Lovac Région",
          "type": "object",
          "x-fromUrl": "api/v1/datasets?status=finalized&field-type=integer,number&q={q}&select=id,title&owner={context.owner.type}:{context.owner.id}",
          "x-itemsProp": "results",
          "x-itemTitle": "title",
          "x-itemKey": "href",
          "properties": {
            "href": {
              "type": "string"
            },
            "title": {
              "type": "string"
            },
            "id": {
              "type": "string"
            }
          }
        },
        {
          "title": "Permis de construire",
          "type": "object",
          "x-fromUrl": "api/v1/datasets?status=finalized&field-type=integer,number&q={q}&select=id,title&owner={context.owner.type}:{context.owner.id}",
          "x-itemsProp": "results",
          "x-itemTitle": "title",
          "x-itemKey": "href",
          "properties": {
            "href": {
              "type": "string"
            },
            "title": {
              "type": "string"
            },
            "id": {
              "type": "string"
            }
          }
        }
      ]
    }
  }
}
